<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Arpad Bakay">
   <meta name="GENERATOR" content="Microsoft FrontPage 4.0">
   <title>Lesson 7 -- Pattern Based Interpreters, Working With XML Data</title>
</head>
<body text="#000066" 
      bgcolor="#FFFFCC" 
      link="#0000EE" 
      vlink="#551A8B" 
      alink="#FF0000">

<center>
<b><u><font size=+2>Lesson 7
<br>Working With XML Data
<br>Pattern-Based Generator-Interpreter
</font></u></b>
</center>

<p>
<br><a href="#7.1">7.1 XML data formats in GME</a>
<br><a href="#7.2">7.2 The pattern-based generator-interpreter</a>
<p><br>


<a name="7.1"></a>
<b><u><font size=+1>7.1 XML data formats in GME</font></u></b>
<p>

GME uses XML data format for two purposes:

<ul>
 <li>
  to represent paradigms (by default, these files have the extension ".xmp"), 
  and 
 <li>
  to provide an export format for modeling projects.
</ul>

Although the directly useable, native formats for both the paradigms and the 
modeling projects are different, XML files are essential for GME as a common 
language for paradigms (for example, the output of the metamodel interpreter) 
and as a paradigm-independent data storage format.
<p>

Since the XML files are handled by automated procedures (such as "File/Update 
through XML..."), ordinary users will never need to look at the contents of 
these files. But for advanced GME users, a glimpse of the XML data is 
usually very instructive; it reveals a lot of information about the internal 
logic of GME. Please note, however, that the formats of these files
are not published and may change without notice at any time.
<p>

XML may also be used to perform changes on a modeling project that would be too 
tedious to implement through the user interface. For example, if a model 
contains the words "Mr." and "Mrs." in the "Title" attribute for a large number 
of people, translating this model into German requires changing the words to 
"Herr" and "Frau" respectively. The pedantic approach for such a task is to 
write an interpreter. This is truly the most efficient option if there are a 
large number of projects to be converted. But if there is only one modeling 
project, the easiest way would probably be to use the Search/Replace function of 
an ordinary text editor.
<p>

Changes in the metamodel may also render an existing XML file invalid. Suppose a 
certain model used to be able to contain an atom, which is not allowed in the 
recent version of the paradigm. Due to indentations, containment relationships 
are readily apparent in the XML file; it is fairly easy to locate the offending 
atom and to delete it or move it to anther location.
<p>

The following example has been written to explain a little of the format and 
logic of the GME XML files. Let us consider a simple metamodel (Fig 7.1).
<p><br>


<center>
<img SRC="L7/F1/Fig7_1.gif">
<br><b>Fig 7.1 A simple <a href="L7/F1/tmeta.xme"> metamodel</a></b>
</center>
<p><br>


When a metamodel is interpreted, an XML paradigm file (which by default is named 
"tmeta.xmp" for this metamodel) is created. As a paradigm defines metaobjects, 
the XML file defines metaentities: a Folder, (the root folder), two attributes, 
a model and an atom. The child entities (like "Prisoner") are usually defined 
outside the container model ("Prison"); therefore, the paradigm representation 
is a flat hierarchy. To express containment, models have &lt;role> elements 
which refer to the contained objects ("Prisoner", in this case). The role and 
the referred kind are often given identical names. &lt;model>s also have 
&lt;aspect> elements, which list all the visible roles as &lt;part> elements.
<p>

Note that paradigm files refer to the file "edf.dtd" for definitions of the 
document type (DTD).
<p><br>


<center>
<table BORDER WIDTH="95%" >
<tr>
<td>
<tt><font size=-1>
&lt;?xml version="1.0"?>
<br>&lt;!DOCTYPE paradigm SYSTEM "edf.dtd">
<br>
<br>&lt;paradigm name ="tmeta">
<br>
<br>&nbsp;&nbsp;&lt;comment> Generated by the Meta2000 interpreter &lt;/comment>
<br>
<br>&nbsp;&nbsp;&lt;folder name = "RootFolder" metaref = "1000" rootobjects = "Prison " >
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;attrdef name="Age" metaref = "1007" valuetype = "integer" defvalue = "">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dispname>&lt;/dispname>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/attrdef>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;attrdef name="Weight" metaref = "1001" valuetype = "double" defvalue = "">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dispname>&lt;/dispname>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/attrdef>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;atom name = "Prisoner" metaref = "1002"  attributes = "Age Weight">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode name = "namePosition" value ="4">&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/atom>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;model name = "Prison" metaref = "1003" >
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode name = "namePosition" value ="4">&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;role name = "Prisoner" metaref = "1008" kind = "Prisoner">&lt;/role>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;aspect name = &quot;Roomies&quot; metaref = "1009" >
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;part metaref = "1010" role = "Prisoner" primary = "yes" linked = "no">&lt;/part>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/aspect>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/model>
<br>&nbsp;&nbsp;&lt;/folder>
<br>&lt;/paradigm>
</font></tt>
</td>
</tr>
</table>
</center>
<p><br>


The following <a href="L7/F1/singsing.xme"> file</a> is the data file. It is a concrete prison named "SingSing", 
with three inmates. Hierarchy is strictly followed here: the Prison is contained 
by the root folder, and inmates are contained by the Prison. FCOs (atoms, 
models, etc.) have "kind" and "role" attributes as well as child elements: their 
&lt;name> property and a number of &lt;attribute>s. There are also a relatively 
high number of &lt;regnode> elements; these are mechanisms used internally by 
GME to store positions and other visualization information. Even for a model 
with 5 objects, the XML export file is about 50 lines (or 50 XML elements) long. 
Since the two XML file formats obviously differ, the document type definition is 
also different ("mga.dtd" for this format).
<p><br>


<center>
<table BORDER WIDTH="95%" >
<tr>
<td>
<tt><font size=-1>
&lt;?xml version="1.0" encoding="UTF-8"?>
<br>&lt;!DOCTYPE project SYSTEM "mga.dtd">
<br>
<br>&lt;project guid="{00000000-0000-0000-0000-000000000000}" cdate="Fri Sep 21 12:16:55 2001" mdate="Fri Sep 21 12:19:36 2001" metaguid="{F079E422-DEAD-BEEF-FEED-DAD000000000}" metaname="tmeta">
<br>&nbsp;&nbsp;&lt;name>SingSing&lt;/name>
<br>&nbsp;&nbsp;&lt;comment>&lt;/comment>
<br>&nbsp;&nbsp;&lt;author>&lt;/author>
<br>&nbsp;&nbsp;&lt;folder id="id-006a-00000001" kind="RootFolder">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;name>SingSing&lt;/name>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;model id="id-0065-00000001" kind="Prison">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name>Prison&lt;/name>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;atom id="id-0066-00000001" kind="Prisoner" role="Prisoner">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name>#96514&lt;/name>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode name="PartRegs" isopaque="yes">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode
name=&quot;Roomies&quot; isopaque=&quot;yes&quot;&gt;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode name="Position" isopaque="yes">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>164,39&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute kind="Age">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>30&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/attribute>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute kind="Weight">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>190&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/attribute>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/atom>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;atom id="id-0066-00000003" kind="Prisoner" role="Prisoner">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name>#14325&lt;/name>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode name="PartRegs" isopaque="yes">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode
name=&quot;Roomies&quot; isopaque=&quot;yes&quot;&gt;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode name="Position" isopaque="yes">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>38,39&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute kind="Age">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>55&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/attribute>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute kind="Weight">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>171&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/attribute>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/atom>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;atom id="id-0066-00000002" kind="Prisoner" role="Prisoner">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name>#99325&lt;/name>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode name="PartRegs" isopaque="yes">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode name="Aspect" isopaque="yes">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;regnode name="Position" isopaque="yes">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>290,39&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/regnode>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute kind="Age">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>15&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/attribute>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute kind="Weight">
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>155.5&lt;/value>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/attribute>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/atom>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/model>
<br>&nbsp;&nbsp;&lt;/folder>
<br>&lt;/project>
</font></tt>
</td>
</tr>
</table>
</center>

<p><br>

<a name="7.2"></a>
<b><u><font size=+1>7.2 The pattern-based generator-interpreter</font></u></b>
<p>

The pattern based generator-interpreter is probably the most convenient way to provide
simple interpretation (e.g. data export to different file formats) of GME2000 models.
The pattern based generator is paradigm-independent, so it can be used with any kind
of models, only a pattern file needs to be created.
<p>

The generator-interpreter reads a pattern file, and based on its contents generates
output to one or several files. The pattern file may contain plain text, which is
copied to the output verbatim, and special pattern instructions (macros like $Name and
funtions like $!EVAL_FORALL), that are evaluated, and their result is inserted
into the output. Pattern instructions have arguments. A significant type of arguments
are text arguments, which can again contain any mixture of plain text or pattern
instructions. 
<p>

The pattern is always evaluated in the context of an FCO, which is used when evaluating
pattern instructions. Some pattern instructions ($!EVAL_WITH, and $!EVAL_FORALL) change
the context when evaluating their text arguments. 
<p>

<b><u>7.2.1 The macro language</u></b>
<p>

<b><i>$&lt;varname&gt;</i></b><br>
Evaluates variable or attribute &lt;varname&gt; and returns its value to the output. 
<ul>
<li>
First, the set of variables is searched for &lt;varname&gt; (variables are defined by $!DEFINE,
see below).
<li>
Next if &lt;varname&gt; is "Name", then returns the name of the current object.
<li>
If &lt;varname&gt; is "Kind", then returns the kind of the current object.
<li>
Otherwise reads and returns the current object's attribute identified by &lt;varname&gt;
<li>
If none is defined, report error. 
</ul>

<b>$!EVAL_FORALL( <i>&lt;fieldspec&gt;</i>, <i>&lt;textarg&gt;</i> )</b><br>
Gets any number (including 0) of objects identified by &lt;fieldspec&gt;, iterates through them, 
and evaluates &lt;textarg&gt; in their context. &lt;fieldspec&gt; may contain one of the
following specifications:<br><br>

<table width="80%" align="center" cellspacing="0" cellpadding="0" border="0">
<tr>
<td><i>R:<rolename></i></td>
<td width="20" rowspan="6">&nbsp;</td>
<td>the children of this role,</td>
</tr>
<tr>
<td><i>Parent</i></td>
<td>the parent of this object if any,</td>
</tr>
<tr>
<td><i>Type</i></td>
<td>the basetype of this object if any,</td>
</tr>
<tr>
<td><i>Ref</i></td>
<td>the target of a reference object if any,</td>
</tr>
<tr>
<td><i>Dst:&lt;rolename&gt;</i></td>
<td>the destination peer(s) of all connections to the current
object,</td>
</tr>
<tr>
<td><i>Src:&lt;rolename&gt;</i></td>
<td>the source peer(s) of all connections to the current object.</td>
</tr>
</table>
<p>

<b>$!EVAL_WITH( <i>&lt;fieldspec&gt;</i>, <i>&lt;textarg&gt;</i> )</b><br>
Gets the single object identified by &lt;fieldspec&gt; and evaluates &lt;textarg&gt; in
its context, then returns the result. See above the specification of &lt;fieldspec&gt;.
<p>

<b>$!IFEMPTY( <i>&lt;textarg1&gt;</i>, <i>&lt;textarg2&gt;</i> )</b><br>
If &lt;textarg1&gt; evaluates to an empty string, evaluates &lt;textarg2&gt; and returns
the result.
<p>

<b>$!IFDEFAULT( <i>&lt;textarg1&gt;</i>, <i>&lt;textarg2&gt;</i> )</b><br>
If &lt;textarg1&gt; does not have a default value, evaluates &lt;textarg2&gt; and returns
the result.
<p>

<b>$!TOFILE( <i>&lt;textarg&gt;</i> )</b><br>
Closes current output file, and starts writing to the file specified by &lt;textarg&gt;
<p>

<b>$!DEFINE( <i>&lt;varname&gt;</i>, <i>&lt;textarg&gt;</i> )</b><br>
Creates or redefines the variable identified by varname to contain the current value of textarg.
<p>

<b>$!POSTINCR( <i>&lt;varname&gt;</i> )</b><br>
Increments variable varname by 1, and returns its original value
(its value must be legible as a number).
<p>

<b>$!SEQ( <i>&lt;textarg1&gt;</i>, <i>&lt;textarg2&gt;</i>, ... )</b><br>
Evaluates textargs one by one and appends their result .
<p><br>

<b><u>7.2.2 Separating verbatim text and pattern instructions</u></b>
<p>

The text of the pattern file is copied verbatim to the output, unless a pattern
instruction (beginning with $) is detected. A pattern instruction must fit into
a single line, but physical lines can be merged into a single logical one by
specifying \ as the last character of the first line. ‘$’ and ‘\’ characters
are produced using ‘\$’ and ‘\\’ respectively.
<p>

Text arguments within functions are evaluated in a similar fashion, but
<ul>
<li>they may be surrounded by double quotes ( " " ) to indicate the borders
of the string. Otherwise, a string is terminated by the first unquoted ‘,’ or ‘)’.
<li>‘\t’ and ‘\n’ is converted to tab and newline characters in the generated output.
</ul>

<b><u>7.2.3 Examples</u></b>
<p>
The following <a href="L7/networking.pat">example</a> generates an XML output from the <a href="Lesson6.html">networking example</a>.
<p><br>

<table align="center" cellspacing="0" cellpadding="0" BORDER="1" WIDTH="95%" >
<tr>
<td>
<tt><font size=-1>
$!DEFINE("_FILENAMEBASE", "$!IFDEFAULT("FileNameBase","$(Name)")")<br>
$!TO_FILE("$!IFDEFAULT("OutputPath","")$(_FILENAMEBASE).xml")<br>
<br>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>
<br>
&lt;$Name&gt;<br>
<br>
$!EVAL_FORALL("R:Folder","&lt;Folder&gt;\n&lt;Name&gt;$Name&lt;/Name&gt;\n&lt;FolderContainment&gt;\n\<br>
$!EVAL_FORALL("Src:FolderContainment","&lt;$Kind&gt;$Name&lt;/$Kind&gt;\n")\<br>
&lt;/FolderContainment&gt;\n&lt;/Folder&gt;\n")<br>
<br>
$!EVAL_FORALL("R:Model","&lt;Model&gt;\n&lt;Name&gt;$Name&lt;/Name&gt;\n&lt;Containment&gt;\n\<br>
$!EVAL_FORALL("Src:Containment","&lt;$Kind&gt;$Name&lt;/$Kind&gt;\n")\<br>
&lt;/Containment&gt;\n&lt;/Model&gt;\n")<br>
<br>
$!EVAL_FORALL("R:Set","&lt;Set&gt;\n&lt;Name&gt;$Name&lt;/Name&gt;\n&lt;SetMembership&gt;\n\<br>
$!EVAL_FORALL("Src:SetMembership","&lt;$Kind&gt;$Name&lt;/$Kind&gt;\n")\<br>
&lt;/SetMembership&gt;\n&lt;/Set&gt;\n")<br>
<br>
$!EVAL_FORALL("R:Reference","&lt;Reference&gt;\n&lt;Name&gt;$Name&lt;/Name&gt;\n&lt;ReferTo&gt;\n\<br>
$!EVAL_FORALL("Dst:ReferTo","&lt;$Kind&gt;$Name&lt;/$Kind&gt;\n")\<br>
&lt;/ReferTo&gt;\n&lt;/Reference&gt;\n")<br>
<br>
$!EVAL_FORALL("R:FCO","&lt;FCO&gt;\n&lt;Name&gt;$Name&lt;/Name&gt;\n&lt;Inheritance&gt;\n\<br>
$!EVAL_FORALL("Dst:BaseInheritance","\<br>
$!EVAL_FORALL("Dst:DerivedInheritance","&lt;$Kind&gt;$Name&lt;/$Kind&gt;\n")")\<br>
&lt;/Inheritance&gt;\n&lt;/FCO&gt;\n")<br>
<br>
$!EVAL_FORALL("R:Atom","&lt;Atom&gt;\n&lt;Name&gt;$Name&lt;/Name&gt;\n&lt;Inheritance&gt;\n\<br>
$!EVAL_FORALL("Dst:BaseInheritance","\<br>
$!EVAL_FORALL("Dst:DerivedInheritance","&lt;$Kind&gt;$Name&lt;/$Kind&gt;\n")")\<br>
&lt;/Inheritance&gt;\n&lt;/Atom&gt;\n")<br>
<br>
$!EVAL_FORALL("R:Connector","&lt;Connector&gt;\n&lt;SourceToConnector&gt;\n\<br>
$!EVAL_WITH("Src:SourceToConnector","&lt;$Kind&gt;$Name&lt;/$Kind&gt;\n")\<br>
&lt;/SourceToConnector&gt;\n&lt;ConnectorToDestination&gt;\<br>
$!EVAL_WITH("Dst:ConnectorToDestination","&lt;$Kind&gt;$Name&lt;/$Kind&gt;\n")\<br>
&lt;/ConnectorToDestination&gt;\n&lt;AssociationClass&gt;\n\<br>
$!EVAL_WITH("Dst:AssociationClass","&lt;$Kind&gt;$Name&lt;/$Kind&gt;\n")\<br>
&lt;/AssociationClass&gt;\n&lt;/Connector&gt;\n")<br>
<br>
&lt;/$Name&gt;<br>
</font>
</td>
</tr>
</table>
<p>

And the next <a href="L7/sf.pat">one</a> generates an HTML file from the SF demo.
<p>

<table align="center" cellspacing="0" cellpadding="0" BORDER="1" WIDTH="95%" >
<tr>
<td>
<tt><font size=-1>
$!DEFINE("_FILENAMEBASE", "$!IFDEFAULT("FileNameBase","$(Name)")")<br>
$!TO_FILE("$!IFDEFAULT("OutputPath","")$(_FILENAMEBASE).html")<nobr>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;	&lt;title&gt;GME SF2000Demo - Generated by PatPlugin&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;<br>
<br>
&nbsp;	&lt;h1&gt;PrimitiveParts&lt;/h1&gt;<br>
<br>
&nbsp;	&lt;table align="center" width="600" cellspacing="0" cellpadding="0" border="1"&gt;<br>
&nbsp;	&lt;tr&gt;&lt;td&gt;Item No.&lt;/td&gt;&lt;td&gt;Name&lt;/td&gt;&lt;td&gt;Firing&lt;/td&gt;&lt;td&gt;Script&lt;/td&gt;&lt;td&gt;Priority&lt;/td&gt;&lt;/tr&gt;<br>
&nbsp;	$!DEFINE("INDEX","1")<br>
&nbsp;	$!EVAL_FORALL("R:PrimitiveParts","&lt;tr&gt;\n&lt;td&gt;$!POSTINCR("INDEX")&lt;/td&gt;\<br>
&nbsp;&nbsp;		&lt;td&gt;$Name&lt;/td&gt;&lt;td&gt;$Firing&lt;/td&gt;&lt;td&gt;$Script&lt;/td&gt;&lt;td&gt;$Priority&lt;/td&gt;\n&lt;/tr&gt;\n")<br>
&nbsp;	&lt;/table&gt;<br>
<br>
&nbsp;	&lt;br&gt;&lt;br&gt;<br>
<br>
&nbsp;	&lt;h1&gt;CompoundParts&lt;/h1&gt;<br>
<br>
&nbsp;	$!DEFINE("INDEX","1")<br>
&nbsp;	$!EVAL_FORALL("R:CompoundParts",\<br>
&nbsp;&nbsp;		"&lt;table align=\"center\" width=\"600\" cellspacing=\"0\" cellpadding=\"0\" border=\"1\"&gt;\n\<br>
&nbsp;&nbsp;		&lt;tr&gt;\n&lt;th colspan=\"5\" align=\"left\"&gt;&lt;b&gt;$Name&lt;/b&gt;&lt;/th&gt;\n&lt;/tr&gt;\n\<br>
&nbsp;&nbsp;		&lt;tr&gt;\n&lt;td&gt;Item No.&lt;/td&gt;&lt;td&gt;Name&lt;/td&gt;&lt;td&gt;Firing&lt;/td&gt;&lt;td&gt;Script&lt;/td&gt;&lt;td&gt;Priority&lt;/td&gt;\n&lt;/tr&gt;\n\<br>
&nbsp;&nbsp;		$!EVAL_FORALL("R:PrimitiveParts","&lt;tr&gt;\n&lt;td&gt;$!POSTINCR("INDEX")&lt;/td&gt;\<br>
&nbsp;&nbsp;&nbsp;			&lt;td&gt;$Name&lt;/td&gt;&lt;td&gt;$Firing&lt;/td&gt;&lt;td&gt;$Script&lt;/td&gt;&lt;td&gt;$Priority&lt;/td&gt;\n&lt;/tr&gt;\n")\&lt;/table&gt;")<br>
<br>
&nbsp;	&lt;br&gt;&lt;br&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;</font></tt></nobr>
</table>




<p><br>

<center>
<hr width="80%">
<table><tr><td>
<a href="Lesson6.html">&lt;&lt; Previous Lesson</a>
</td><td width=50></td><td>
<a href="index.html#toc">Complete List</a>
</td><td width=50></td><td>
<a href="Lesson8.html"> Next Lesson >></a>
</td></tr></table>
</center>

</BODY>
</html>
